{% extends 'crm/base.html' %}
{% block content %}
<h2>Leads</h2>
<table class="table bg-white">
  <thead class="table-light"><tr><th>#</th><th>Source</th><th>Phone</th><th>Email</th><th>Student</th><th>Received</th></tr></thead>
  <tbody>
    {% for l in leads %}
      <tr>
        <td>{{ l.id }}</td>
        <td>{{ l.source }}</td>
        <td>{{ l.phone|default:'—' }}</td>
        <td>{{ l.email|default:'—' }}</td>
        <td>{% if l.student %}<a href="{% url 'student_detail' l.student.id %}">{{ l.student }}</a>{% else %}—{% endif %}</td>
        <td>{{ l.created_at }}</td>
      </tr>
    {% empty %}
      <tr><td colspan="6" class="text-center">No leads yet.</td></tr>
    {% endfor %}
  </tbody>
</table>

<nav aria-label="pagination">
  <ul class="pagination">
    {% if leads.has_previous %}<li class="page-item"><a class="page-link" href="?page={{ leads.previous_page_number }}">Prev</a></li>{% endif %}
    {% for p in leads.paginator.page_range %}
      <li class="page-item {% if leads.number == p %}active{% endif %}"><a class="page-link" href="?page={{ p }}">{{ p }}</a></li>
    {% endfor %}
    {% if leads.has_next %}<li class="page-item"><a class="page-link" href="?page={{ leads.next_page_number }}">Next</a></li>{% endif %}
  </ul>
</nav>
{% endblock %}
